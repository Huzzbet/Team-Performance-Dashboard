<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>U14 Season Analytics Dashboard</title>

<!-- ===== Fonts ===== -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- ===== Chart.js ===== -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#0b1220;
  --card:#0f1828;
  --border:rgba(255,255,255,.08);
  --text:#e7eefc;
  --muted:#9fb0d0;

  --blue:#6ee7ff;
  --green:#2bd47d;
  --red:#ff5c7a;
  --amber:#ffd166;

  --radius:22px;
  --shadow:0 20px 45px rgba(0,0,0,.45);
  --font:'Inter',system-ui,-apple-system;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:var(--font);
  background:
    radial-gradient(900px 500px at 15% -10%, #1b2b4a 0%, transparent 55%),
    linear-gradient(180deg, #08101f, #040814);
  color:var(--text);
}

/* ===== Layout ===== */
.wrap{
  max-width:1100px;
  margin:auto;
  padding:22px;
}

.card{
  background:linear-gradient(180deg,#101b33,#0b1326);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px;
  margin-bottom:18px;
}

h1{font-size:22px;margin:0 0 6px}
h2{font-size:16px;margin:0 0 10px;color:#cfe3ff}
small{color:var(--muted)}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:14px;
}

.stat{
  background:linear-gradient(180deg,#121f3c,#0c162e);
  border-radius:18px;
  padding:14px;
  border:1px solid var(--border);
}

.stat .label{color:var(--muted);font-size:12px}
.stat .value{font-size:26px;font-weight:700;margin-top:4px}

/* ===== Table ===== */
table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}

th,td{
  padding:10px 8px;
  border-bottom:1px solid var(--border);
}

th{
  text-align:left;
  color:var(--muted);
  font-weight:600;
}

.win{color:var(--green)}
.loss{color:var(--red)}

/* ===== Mobile tweaks ===== */
@media (max-width:700px){
  h1{font-size:18px}
}
</style>
</head>

<body>
<div class="wrap">

  <!-- ===== HEADER ===== -->
  <div class="card">
    <h1>U14 Season Analytics Dashboard</h1>
    <small>Lakers U14 Boys Copper • Auto-loaded from <code>/data/season-2026.json</code></small>
  </div>

  <!-- ===== SNAPSHOT ===== -->
  <div class="card">
    <h2>Season Snapshot</h2>
    <div class="grid">
      <div class="stat">
        <div class="label">Record</div>
        <div class="value" id="record">–</div>
      </div>
      <div class="stat">
        <div class="label">Avg Points For</div>
        <div class="value" id="avgFor">–</div>
      </div>
      <div class="stat">
        <div class="label">Avg Points Against</div>
        <div class="value" id="avgAgainst">–</div>
      </div>
      <div class="stat">
        <div class="label">Avg Margin</div>
        <div class="value" id="avgMargin">–</div>
      </div>
    </div>
  </div>

  <!-- ===== RESULTS TABLE ===== -->
  <div class="card">
    <h2>Game Results</h2>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Opponent</th>
          <th>Score</th>
          <th>Margin</th>
          <th>Result</th>
        </tr>
      </thead>
      <tbody id="resultsBody"></tbody>
    </table>
  </div>

  <!-- ===== CHART ===== -->
  <div class="card">
    <h2>Points For vs Against</h2>
    <canvas id="pointsChart" height="140"></canvas>
  </div>

</div>

<script>
/* ==============================
   DATA + LOGIC
============================== */

const DATA_URL = "./data/season-2026.json";
let games = [];

async function loadSeason(){
  const res = await fetch(DATA_URL,{cache:"no-store"});
  games = await res.json();
  render();
}

function render(){
  const totalGames = games.length;

  let wins = 0;
  let pf = 0;
  let pa = 0;

  const tbody = document.getElementById("resultsBody");
  tbody.innerHTML = "";

  games.forEach(g=>{
    pf += g.teamScore;
    pa += g.oppScore;

    const margin = g.teamScore - g.oppScore;
    const win = margin > 0;
    if(win) wins++;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${g.game}</td>
      <td>${g.opponent}</td>
      <td>${g.teamScore}–${g.oppScore}</td>
      <td class="${win?"win":"loss"}">${margin}</td>
      <td class="${win?"win":"loss"}">${win?"W":"L"}</td>
    `;
    tbody.appendChild(tr);
  });

  document.getElementById("record").textContent = `${wins}-${totalGames-wins}`;
  document.getElementById("avgFor").textContent = (pf/totalGames).toFixed(1);
  document.getElementById("avgAgainst").textContent = (pa/totalGames).toFixed(1);
  document.getElementById("avgMargin").textContent = ((pf-pa)/totalGames).toFixed(1);

  drawChart();
}

function drawChart(){
  const ctx = document.getElementById("pointsChart");

  new Chart(ctx,{
    type:"line",
    data:{
      labels:games.map(g=>"G"+g.game),
      datasets:[
        {
          label:"Points For",
          data:games.map(g=>g.teamScore),
          borderColor:"#6ee7ff",
          tension:.35
        },
        {
          label:"Points Against",
          data:games.map(g=>g.oppScore),
          borderColor:"#ff5c7a",
          tension:.35
        }
      ]
    },
    options:{
      plugins:{legend:{labels:{color:"#cfe3ff"}}},
      scales:{
        x:{ticks:{color:"#9fb0d0"},grid:{color:"rgba(255,255,255,.05)"}},
        y:{ticks:{color:"#9fb0d0"},grid:{color:"rgba(255,255,255,.05)"}}
      }
    }
  });
}

loadSeason();
</script>
</body>
</html>